# 双十一来临，如何保障业务系统的稳定性

感谢牛兔老师的分享，本文是阿里云 PTS 的学习笔记。

## 1. 起因：大促期间的血泪史

每年的双十一都是各个企业尤其是营销的关键时节，业务牵头信心满满的准备筹备一场秒数。于是各种策划、各种宣传、各种铺垫、各种业务定制开发，让客户和业务的同学都越来越 high。在万众瞩目的那一刻来临之时，缺因系统抗不住压力，各种异常，赶来的客户于是抱怨、投诉，业务的同学抱怨系统、抱怨技术部门。最终很可能会导致：经济损失、品牌受损、客户投诉、客户投诉。

本该是一场集体的狂欢，却变成技术人反思检讨的窝火。梳理一下，导致大促失败的的原因主要有四类：

* 缺乏意识：只知道准备资源，不知道准确的要准备哪些资源，核心是没有压测的意识。
* 没有按流程准备：简单的进行了单次测试，没有系统化的准备、操作、优化、验证。
* 用错了工具：使用了一些开源的工具，但并没有做到模拟真实流量来进行压测。
* 不知道如何定位优化：进行了压测，但没有详细的报告，不知道系统瓶颈在哪里，无从入手优化，或者优化工作效率很低。

## 2. 为什么要做性能压测

针对业务系统做性能压测的核心诉求有 4 点：

### 第一、维护品牌形象

如果对突增的流量准备不足，会导致给企业带来直接经济损失或者间接的品牌损伤。

### 第二、影响客户体验

产品核心功能的体验，尤其是在峰值时的性能表现，特别重要。大量数据表明，每 0.1 秒的核心体验响应时间延长，会导致 1%的营收下降。

### 第三、有效的成本投入

简单的扩容、加资源，不能保证花的钱有价值、有必要。不同业务模型下，容量配比不尽相同。如何基于精准的流量模型，来完成最低成本的容量预估，是重要的问题。

### 第四、系统的不确定性

现在越来越多的系统采用分布式架构，这导致系统复杂度大幅增加，同时导致系统发展的不确定性，进而导致系统的瓶颈点不再固定在某个环境，于是需要经常性的检查系统的瓶颈。

## 3. 理想大促离不开精心的准备

如果没有精心准备，每次大促就像滑索过河，那是相当的刺激。时间长了谁的心脏都受不了。反正，大促的体验很可能就像开车走过港珠澳大桥一般，如何做好呢？建议从以下 6 步来实现。

### 第一、架构梳理

### 第二、压测环境准备

### 第三、基础数据准备

### 第四、仿真压测

### 第五、定位瓶颈及容量调整

### 第六、活动保障及把酒庆祝

## 压测后的问题定位

针对系统压测过后，需要对系统

## 其他典型使用压测的业务场景

除了双十一外，

### 新系统上线

### 峰值业务稳定性

#

## PTS 客户行业类型


